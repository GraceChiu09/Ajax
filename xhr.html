<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>XMLHttpRequest</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <!-- <style>
        *{
            margin: 0;
            padding: 0;
        }
        
        ul{
            max-width: 80vh;
        }
        ul li{
            padding: 0.5rem 1rem;
            border: 1px solid green;

        }
        h2{
            color: bisque;
            background-color: black;
            width: 100px;
            height: 30px;
        }
    </style> -->
</head>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
<body>
   
    <h1 class="header co-1">XMLHttpRequest</h1>
    <div class="title"></div>
    <h2 class="co-2">今天心情不好</h2>
    <h4 class="col-3">周末要做啥?</h4>
    <div class="card" style="width:18rem ;"></div>
    <ul class="card-deck flex-warp text-center border-dark border-secondary width:16rem"></ul>
    <p class="card-text"></p>

</body>
</html>
<script>
    /********************************************************
    * 1.api網址  https://kktix.com/events.json
    * 2.宣告一個XMLHttpRequest物件
    * 3.建立請求的各項設定及實質內容
    * 4.建立得到回應時的各項行為
    * 5.送出請求
    ********************************************************/

    //宣告一個XMLHttpRequest物件
    let xhr = new XMLHttpRequest;



    //建立請求的各項設定及實質內容
    // 預設非同步
    xhr.open(
        'get', 
        'https://kktix.com/events.json',

    );

    //建立得到回應時的各項設定及行為
    xhr.onload=function(){
        let type=xhr.getResponseHeader("Content-Type");
        let status=xhr.status;
        let res=xhr.responseText;
        let data=JSON.parse(res);
        // console.log(type, status, res);
        let title=document.querySelector(".title");
        title.innerHTML=data.title;
        // text.innerHTML=data.responseText

        // console.log(data);
        let ul=document.querySelector('ul');
        let li='';
        // let li=document.querySelector('li');
        // let p='';
        let entrys=data.entry;
        for (let i = 0; i < entrys.length; i++) {
            li=li+`<li class='card-body col-3 border-2'><div class='card-deck'>${entrys[i].title}<div class='card'>${entrys[i].author.name}<P class="card-text">${entrys[i].responseText}<P>
                
                </div></div></li>`;
            
        }
        ul.innerHTML=li;
    }

    //送出請求
    xhr.send();
    // for (let i = 0; i < data.entry.length; i++) {
    //     console.log(data.entry[i]);
        
    // }

    </script>